<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jetpack Compose + Clean Architecture: ëŒ€ê·œëª¨ ì•±ì„ ìœ„í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ | ChanDev</title>
    <meta name="description" content="ì‹¤ì œ í”„ë¡œë•ì…˜ ì•±ì—ì„œ Jetpack Composeì™€ Clean Architectureë¥¼ ê²°í•©í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ê·¹ëŒ€í™”í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„ ë°©ë²•">
    <meta name="author" content="Chansaem Lee">
    <meta name="keywords" content="Jetpack Compose, Clean Architecture, Android, Kotlin, Hilt, Multi-module">
    
    <meta property="og:type" content="article">
    <meta property="og:title" content="Jetpack Compose + Clean Architecture: ëŒ€ê·œëª¨ ì•±ì„ ìœ„í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„">
    <meta property="og:description" content="ì‹¤ì œ í”„ë¡œë•ì…˜ ì•±ì—ì„œ Jetpack Composeì™€ Clean Architectureë¥¼ ê²°í•©í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„">
    <meta property="og:url" content="https://inyion.github.io/posts/android/jetpack-compose-clean-architecture/">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="/assets/css/modern.css">
</head>
<body>
    <div class="bg-gradient"></div>
    <div class="bg-grid"></div>
    
    <header class="site-header">
        <div class="container">
            <div class="header-content">
                <a href="/" class="logo">
                    <div class="logo-icon">âš¡</div>
                    <span>ChanDev</span>
                </a>
                <nav>
                    <ul class="nav-menu" id="navMenu">
                        <li><a href="/" class="nav-link">Home</a></li>
                        <li><a href="/categories/" class="nav-link">Categories</a></li>
                        <li><a href="/archives/" class="nav-link">Archives</a></li>
                        <li><a href="/#about" class="nav-link">About</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Toggle menu">
                    <i class="fa fa-bars"></i>
                </button>
            </div>
        </div>
    </header>
    
    <main class="post-page">
        <article>
            <div class="post-header">
                <div class="container">
                    <span class="post-category android">
                        <i class="fa-brands fa-android"></i> Android
                    </span>
                    <h1 class="post-title">Jetpack Compose + Clean Architecture: ëŒ€ê·œëª¨ ì•±ì„ ìœ„í•œ ì•„í‚¤í…ì²˜ ì„¤ê³„</h1>
                    <div class="post-meta">
                        <span class="post-meta-item">
                            <i class="fa fa-calendar"></i>
                            2024ë…„ 12ì›” 1ì¼
                        </span>
                        <span class="post-meta-item">
                            <i class="fa fa-clock"></i>
                            15 min read
                        </span>
                        <span class="post-meta-item">
                            <i class="fa fa-user"></i>
                            Chansaem Lee
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="post-content">
                <div class="container container-narrow">
                    <div class="post-body">
                        <p>
                            ëŒ€ê·œëª¨ Android ì•±ì„ ê°œë°œí•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ <strong>í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì‰¬ìš´ ì•„í‚¤í…ì²˜</strong>ì…ë‹ˆë‹¤. 
                            ì´ ê¸€ì—ì„œëŠ” Jetpack Composeì™€ Clean Architectureë¥¼ ê²°í•©í•˜ì—¬ ì‹¤ì œ í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ 
                            ê²€ì¦ëœ ì•„í‚¤í…ì²˜ íŒ¨í„´ì„ ê³µìœ í•©ë‹ˆë‹¤.
                        </p>
                        
                        <div class="toc">
                            <h4 class="toc-title">ğŸ“‘ Table of Contents</h4>
                            <ul class="toc-list">
                                <li><a href="#why-clean-architecture">ì™œ Clean Architectureì¸ê°€?</a></li>
                                <li><a href="#multi-module">Multi-module í”„ë¡œì íŠ¸ êµ¬ì¡°</a></li>
                                <li><a href="#domain-layer">Domain Layer ì„¤ê³„</a></li>
                                <li><a href="#data-layer">Data Layer êµ¬í˜„</a></li>
                                <li><a href="#presentation-layer">Presentation Layerì™€ Compose</a></li>
                                <li><a href="#di-strategy">ì˜ì¡´ì„± ì£¼ì… ì „ëµ</a></li>
                                <li><a href="#state-management">State Management íŒ¨í„´</a></li>
                                <li><a href="#testing">í…ŒìŠ¤íŠ¸ ì „ëµ</a></li>
                            </ul>
                        </div>
                        
                        <h2 id="why-clean-architecture">ì™œ Clean Architectureì¸ê°€?</h2>
                        
                        <p>
                            Clean ArchitectureëŠ” Robert C. Martin(Uncle Bob)ì´ ì œì•ˆí•œ ì•„í‚¤í…ì²˜ íŒ¨í„´ìœ¼ë¡œ, 
                            <strong>ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Separation of Concerns)</strong>ë¥¼ í•µì‹¬ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤. 
                            Android ê°œë°œì—ì„œ ì´ë¥¼ ì ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì´ì ì„ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
                        </p>
                        
                        <ul>
                            <li><strong>í…ŒìŠ¤íŠ¸ ìš©ì´ì„±</strong>: ê° ë ˆì´ì–´ë¥¼ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
                            <li><strong>ìœ ì—°í•œ UI ë³€ê²½</strong>: UI í”„ë ˆì„ì›Œí¬(XML â†’ Compose) ì „í™˜ì´ ì‰½ìŠµë‹ˆë‹¤</li>
                            <li><strong>ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ë³´í˜¸</strong>: í•µì‹¬ ë¡œì§ì´ í”„ë ˆì„ì›Œí¬ì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</li>
                            <li><strong>íŒ€ í˜‘ì—… íš¨ìœ¨í™”</strong>: ëª¨ë“ˆë³„ë¡œ ì‘ì—… ë¶„ë‹´ì´ ëª…í™•í•´ì§‘ë‹ˆë‹¤</li>
                        </ul>
                        
                        <h2 id="multi-module">Multi-module í”„ë¡œì íŠ¸ êµ¬ì¡°</h2>
                        
                        <p>ëŒ€ê·œëª¨ ì•±ì—ì„œëŠ” ë‹¨ì¼ ëª¨ë“ˆ êµ¬ì¡°ì˜ í•œê³„ê°€ ëª…í™•í•©ë‹ˆë‹¤. Multi-module êµ¬ì¡°ë¥¼ í†µí•´ ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•ê³¼ ì½”ë“œ ì¬ì‚¬ìš©ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                        
                        <pre><code>ğŸ“¦ project-root
â”œâ”€â”€ ğŸ“ app                    # Application module
â”œâ”€â”€ ğŸ“ core
â”‚   â”œâ”€â”€ ğŸ“ common             # ê³µí†µ ìœ í‹¸, í™•ì¥ í•¨ìˆ˜
â”‚   â”œâ”€â”€ ğŸ“ designsystem       # Compose Design System
â”‚   â”œâ”€â”€ ğŸ“ network            # Retrofit, OkHttp ì„¤ì •
â”‚   â””â”€â”€ ğŸ“ database           # Room Database
â”œâ”€â”€ ğŸ“ domain
â”‚   â”œâ”€â”€ ğŸ“ model              # ë¹„ì¦ˆë‹ˆìŠ¤ ëª¨ë¸
â”‚   â”œâ”€â”€ ğŸ“ repository         # Repository ì¸í„°í˜ì´ìŠ¤
â”‚   â””â”€â”€ ğŸ“ usecase            # Use Cases
â”œâ”€â”€ ğŸ“ data
â”‚   â”œâ”€â”€ ğŸ“ repository         # Repository êµ¬í˜„ì²´
â”‚   â””â”€â”€ ğŸ“ datasource         # Remote/Local DataSource
â””â”€â”€ ğŸ“ feature
    â”œâ”€â”€ ğŸ“ home               # í™ˆ í™”ë©´ Feature
    â”œâ”€â”€ ğŸ“ profile            # í”„ë¡œí•„ Feature
    â””â”€â”€ ğŸ“ settings           # ì„¤ì • Feature</code></pre>
                        
                        <p><strong>ëª¨ë“ˆ ê°„ ì˜ì¡´ì„± ê·œì¹™</strong>ì„ ì² ì €íˆ ì§€ì¼œì•¼ í•©ë‹ˆë‹¤:</p>
                        
                        <pre><code class="language-kotlin">// feature ëª¨ë“ˆì˜ build.gradle.kts
dependencies {
    implementation(project(":core:designsystem"))
    implementation(project(":core:common"))
    implementation(project(":domain:usecase"))
    // âŒ data ëª¨ë“ˆ ì§ì ‘ ì˜ì¡´ ê¸ˆì§€!
}</code></pre>
                        
                        <h2 id="domain-layer">Domain Layer ì„¤ê³„</h2>
                        
                        <p>Domain LayerëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì–´ë–¤ í”„ë ˆì„ì›Œí¬ì—ë„ ì˜ì¡´í•˜ì§€ ì•ŠëŠ” ìˆœìˆ˜ Kotlin ì½”ë“œë¡œ ì‘ì„±í•©ë‹ˆë‹¤.</p>
                        
                        <h3>Entity ëª¨ë¸ ì •ì˜</h3>
                        
                        <pre><code class="language-kotlin">// domain/model/User.kt
data class User(
    val id: String,
    val name: String,
    val email: String,
    val profileImageUrl: String?,
    val createdAt: LocalDateTime
) {
    val displayName: String
        get() = name.ifBlank { email.substringBefore("@") }
    
    fun isEmailVerified(): Boolean = 
        email.isNotBlank() && email.contains("@")
}</code></pre>
                        
                        <h3>Repository ì¸í„°í˜ì´ìŠ¤</h3>
                        
                        <pre><code class="language-kotlin">// domain/repository/UserRepository.kt
interface UserRepository {
    suspend fun getUser(id: String): Result&lt;User&gt;
    suspend fun updateUser(user: User): Result&lt;Unit&gt;
    fun observeUser(id: String): Flow&lt;User&gt;
}</code></pre>
                        
                        <h3>UseCase íŒ¨í„´</h3>
                        
                        <pre><code class="language-kotlin">// domain/usecase/GetUserProfileUseCase.kt
class GetUserProfileUseCase @Inject constructor(
    private val userRepository: UserRepository,
    private val analyticsRepository: AnalyticsRepository
) {
    suspend operator fun invoke(userId: String): Result&lt;UserProfile&gt; {
        return runCatching {
            val user = userRepository.getUser(userId).getOrThrow()
            val stats = analyticsRepository.getUserStats(userId).getOrThrow()
            
            UserProfile(
                user = user,
                postsCount = stats.postsCount,
                followersCount = stats.followersCount
            )
        }
    }
}</code></pre>
                        
                        <blockquote>
                            <p>ğŸ’¡ <strong>Tip</strong>: UseCaseëŠ” ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¦…ë‹ˆë‹¤. í•˜ë‚˜ì˜ UseCaseëŠ” í•˜ë‚˜ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ì‘ì—…ë§Œ ìˆ˜í–‰í•´ì•¼ í•©ë‹ˆë‹¤.</p>
                        </blockquote>
                        
                        <h2 id="data-layer">Data Layer êµ¬í˜„</h2>
                        
                        <p>Data LayerëŠ” Domain Layerì—ì„œ ì •ì˜í•œ Repository ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>
                        
                        <h3>Repository êµ¬í˜„</h3>
                        
                        <pre><code class="language-kotlin">// data/repository/UserRepositoryImpl.kt
class UserRepositoryImpl @Inject constructor(
    private val remoteDataSource: UserRemoteDataSource,
    private val localDataSource: UserLocalDataSource,
    @IoDispatcher private val ioDispatcher: CoroutineDispatcher
) : UserRepository {

    override suspend fun getUser(id: String): Result&lt;User&gt; = 
        withContext(ioDispatcher) {
            runCatching {
                // Local-first ì „ëµ
                localDataSource.getUser(id)?.toDomain()
                    ?: fetchAndCacheUser(id)
            }
        }
    
    private suspend fun fetchAndCacheUser(id: String): User {
        val userDto = remoteDataSource.fetchUser(id)
        localDataSource.insertUser(userDto.toEntity())
        return userDto.toDomain()
    }
    
    override fun observeUser(id: String): Flow&lt;User&gt; = 
        localDataSource.observeUser(id)
            .map { it.toDomain() }
            .flowOn(ioDispatcher)
}</code></pre>
                        
                        <h3>Mapper íŒ¨í„´</h3>
                        
                        <pre><code class="language-kotlin">// data/mapper/UserMapper.kt
fun UserDto.toDomain(): User = User(
    id = this.id,
    name = this.name,
    email = this.email,
    profileImageUrl = this.avatarUrl,
    createdAt = LocalDateTime.parse(this.createdAt)
)

fun UserEntity.toDomain(): User = User(
    id = this.id,
    name = this.name,
    email = this.email,
    profileImageUrl = this.profileImageUrl,
    createdAt = this.createdAt
)</code></pre>
                        
                        <h2 id="presentation-layer">Presentation Layerì™€ Compose</h2>
                        
                        <p>Jetpack Composeì™€ í•¨ê»˜ MVI(Model-View-Intent) íŒ¨í„´ì„ ì ìš©í•˜ë©´ ìƒíƒœ ê´€ë¦¬ê°€ ëª…í™•í•´ì§‘ë‹ˆë‹¤.</p>
                        
                        <h3>UI State ì •ì˜</h3>
                        
                        <pre><code class="language-kotlin">// feature/profile/ProfileContract.kt
data class ProfileUiState(
    val isLoading: Boolean = false,
    val user: User? = null,
    val error: String? = null
) {
    val isError: Boolean get() = error != null
}

sealed interface ProfileEvent {
    data class LoadProfile(val userId: String) : ProfileEvent
    object Refresh : ProfileEvent
    object RetryClick : ProfileEvent
}

sealed interface ProfileSideEffect {
    data class ShowSnackbar(val message: String) : ProfileSideEffect
    data class NavigateTo(val route: String) : ProfileSideEffect
}</code></pre>
                        
                        <h3>ViewModel êµ¬í˜„</h3>
                        
                        <pre><code class="language-kotlin">// feature/profile/ProfileViewModel.kt
@HiltViewModel
class ProfileViewModel @Inject constructor(
    private val getUserProfileUseCase: GetUserProfileUseCase,
    savedStateHandle: SavedStateHandle
) : ViewModel() {

    private val userId: String = savedStateHandle.get&lt;String&gt;("userId") 
        ?: throw IllegalArgumentException("userId is required")

    private val _uiState = MutableStateFlow(ProfileUiState())
    val uiState: StateFlow&lt;ProfileUiState&gt; = _uiState.asStateFlow()

    private val _sideEffect = Channel&lt;ProfileSideEffect&gt;()
    val sideEffect: Flow&lt;ProfileSideEffect&gt; = _sideEffect.receiveAsFlow()

    init {
        onEvent(ProfileEvent.LoadProfile(userId))
    }

    fun onEvent(event: ProfileEvent) {
        when (event) {
            is ProfileEvent.LoadProfile -> loadProfile(event.userId)
            ProfileEvent.Refresh -> loadProfile(userId)
            ProfileEvent.RetryClick -> loadProfile(userId)
        }
    }

    private fun loadProfile(userId: String) {
        viewModelScope.launch {
            _uiState.update { it.copy(isLoading = true, error = null) }
            
            getUserProfileUseCase(userId)
                .onSuccess { profile ->
                    _uiState.update { 
                        it.copy(isLoading = false, user = profile.user) 
                    }
                }
                .onFailure { throwable ->
                    _uiState.update { 
                        it.copy(isLoading = false, error = throwable.message) 
                    }
                    _sideEffect.send(
                        ProfileSideEffect.ShowSnackbar("Failed to load profile")
                    )
                }
        }
    }
}</code></pre>
                        
                        <h3>Compose UI</h3>
                        
                        <pre><code class="language-kotlin">// feature/profile/ProfileScreen.kt
@Composable
fun ProfileScreen(
    viewModel: ProfileViewModel = hiltViewModel(),
    onNavigateBack: () -> Unit
) {
    val uiState by viewModel.uiState.collectAsStateWithLifecycle()
    val snackbarHostState = remember { SnackbarHostState() }
    
    LaunchedEffect(Unit) {
        viewModel.sideEffect.collect { effect ->
            when (effect) {
                is ProfileSideEffect.ShowSnackbar -> {
                    snackbarHostState.showSnackbar(effect.message)
                }
                is ProfileSideEffect.NavigateTo -> {
                    // Navigate
                }
            }
        }
    }
    
    ProfileContent(
        uiState = uiState,
        snackbarHostState = snackbarHostState,
        onRefresh = { viewModel.onEvent(ProfileEvent.Refresh) },
        onRetry = { viewModel.onEvent(ProfileEvent.RetryClick) },
        onNavigateBack = onNavigateBack
    )
}

@Composable
private fun ProfileContent(
    uiState: ProfileUiState,
    snackbarHostState: SnackbarHostState,
    onRefresh: () -> Unit,
    onRetry: () -> Unit,
    onNavigateBack: () -> Unit
) {
    Scaffold(
        snackbarHost = { SnackbarHost(snackbarHostState) },
        topBar = {
            TopAppBar(
                title = { Text("Profile") },
                navigationIcon = {
                    IconButton(onClick = onNavigateBack) {
                        Icon(Icons.AutoMirrored.Filled.ArrowBack, "Back")
                    }
                }
            )
        }
    ) { padding ->
        Box(
            modifier = Modifier
                .fillMaxSize()
                .padding(padding)
        ) {
            when {
                uiState.isLoading -> LoadingIndicator()
                uiState.isError -> ErrorView(
                    message = uiState.error ?: "Unknown error",
                    onRetry = onRetry
                )
                uiState.user != null -> ProfileDetail(user = uiState.user)
            }
        }
    }
}</code></pre>
                        
                        <h2 id="di-strategy">ì˜ì¡´ì„± ì£¼ì… ì „ëµ</h2>
                        
                        <p>Hiltë¥¼ ì‚¬ìš©í•œ DI ì„¤ì •ì…ë‹ˆë‹¤. ëª¨ë“ˆë³„ë¡œ ëª…í™•í•˜ê²Œ ë¶„ë¦¬í•©ë‹ˆë‹¤.</p>
                        
                        <pre><code class="language-kotlin">// core/network/di/NetworkModule.kt
@Module
@InstallIn(SingletonComponent::class)
object NetworkModule {

    @Provides
    @Singleton
    fun provideOkHttpClient(): OkHttpClient {
        return OkHttpClient.Builder()
            .addInterceptor(HttpLoggingInterceptor().apply {
                level = HttpLoggingInterceptor.Level.BODY
            })
            .connectTimeout(30, TimeUnit.SECONDS)
            .readTimeout(30, TimeUnit.SECONDS)
            .build()
    }

    @Provides
    @Singleton
    fun provideRetrofit(okHttpClient: OkHttpClient): Retrofit {
        return Retrofit.Builder()
            .baseUrl(BuildConfig.API_BASE_URL)
            .client(okHttpClient)
            .addConverterFactory(Json.asConverterFactory("application/json".toMediaType()))
            .build()
    }
}

// data/di/RepositoryModule.kt
@Module
@InstallIn(SingletonComponent::class)
abstract class RepositoryModule {

    @Binds
    @Singleton
    abstract fun bindUserRepository(
        impl: UserRepositoryImpl
    ): UserRepository
}</code></pre>
                        
                        <h2 id="state-management">State Management íŒ¨í„´</h2>
                        
                        <p>Composeì—ì„œ íš¨ê³¼ì ì¸ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ íŒ¨í„´ë“¤ì…ë‹ˆë‹¤.</p>
                        
                        <h3>State Hoisting</h3>
                        
                        <pre><code class="language-kotlin">// Stateless Composable
@Composable
fun UserCard(
    user: User,
    isExpanded: Boolean,
    onExpandClick: () -> Unit,
    modifier: Modifier = Modifier
) {
    Card(modifier = modifier) {
        // UI ë Œë”ë§
    }
}

// Stateful Container
@Composable
fun UserCardContainer(user: User) {
    var isExpanded by remember { mutableStateOf(false) }
    
    UserCard(
        user = user,
        isExpanded = isExpanded,
        onExpandClick = { isExpanded = !isExpanded }
    )
}</code></pre>
                        
                        <h3>ë¦¬ì»´í¬ì§€ì…˜ ìµœì í™”</h3>
                        
                        <pre><code class="language-kotlin">// âŒ Bad: ë¶ˆí•„ìš”í•œ ë¦¬ì»´í¬ì§€ì…˜ ë°œìƒ
@Composable
fun UserList(users: List&lt;User&gt;) {
    LazyColumn {
        items(users) { user ->
            UserItem(user)
        }
    }
}

// âœ… Good: keyë¥¼ ì‚¬ìš©í•œ ìµœì í™”
@Composable
fun UserList(users: List&lt;User&gt;) {
    LazyColumn {
        items(
            items = users,
            key = { it.id }  // Stable key
        ) { user ->
            UserItem(user)
        }
    }
}

// âœ… Immutable ì–´ë…¸í…Œì´ì…˜ í™œìš©
@Immutable
data class UserUiModel(
    val id: String,
    val name: String,
    val avatarUrl: String
)</code></pre>
                        
                        <h2 id="testing">í…ŒìŠ¤íŠ¸ ì „ëµ</h2>
                        
                        <p>Clean Architectureì˜ ê°€ì¥ í° ì¥ì  ì¤‘ í•˜ë‚˜ëŠ” <strong>í…ŒìŠ¤íŠ¸ ìš©ì´ì„±</strong>ì…ë‹ˆë‹¤.</p>
                        
                        <h3>UseCase ë‹¨ìœ„ í…ŒìŠ¤íŠ¸</h3>
                        
                        <pre><code class="language-kotlin">@Test
fun `getUser returns success when repository succeeds`() = runTest {
    // Given
    val expectedUser = User(id = "1", name = "John", ...)
    coEvery { userRepository.getUser("1") } returns Result.success(expectedUser)
    
    // When
    val result = getUserUseCase("1")
    
    // Then
    assertTrue(result.isSuccess)
    assertEquals(expectedUser, result.getOrNull())
}

@Test
fun `getUser returns failure when repository fails`() = runTest {
    // Given
    val exception = IOException("Network error")
    coEvery { userRepository.getUser("1") } returns Result.failure(exception)
    
    // When
    val result = getUserUseCase("1")
    
    // Then
    assertTrue(result.isFailure)
}</code></pre>
                        
                        <h3>ViewModel í…ŒìŠ¤íŠ¸</h3>
                        
                        <pre><code class="language-kotlin">@Test
fun `loadProfile updates uiState with user on success`() = runTest {
    // Given
    val user = User(id = "1", name = "John", ...)
    coEvery { getUserProfileUseCase("1") } returns Result.success(UserProfile(user, ...))
    
    // When
    val viewModel = ProfileViewModel(getUserProfileUseCase, savedStateHandle)
    
    // Then
    val state = viewModel.uiState.value
    assertFalse(state.isLoading)
    assertEquals(user, state.user)
    assertNull(state.error)
}</code></pre>
                        
                        <h2>ë§ˆë¬´ë¦¬</h2>
                        
                        <p>
                            Clean Architectureì™€ Jetpack Composeì˜ ì¡°í•©ì€ ëŒ€ê·œëª¨ Android ì•± ê°œë°œì—ì„œ 
                            ê°•ë ¥í•œ ì‹œë„ˆì§€ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤. ì´ˆê¸° ì„¤ì •ì— ì‹œê°„ì´ ê±¸ë¦¬ì§€ë§Œ, ì¥ê¸°ì ìœ¼ë¡œ 
                            <strong>ìœ ì§€ë³´ìˆ˜ ë¹„ìš© ì ˆê°</strong>ê³¼ <strong>íŒ€ ìƒì‚°ì„± í–¥ìƒ</strong>ì— í¬ê²Œ ê¸°ì—¬í•©ë‹ˆë‹¤.
                        </p>
                        
                        <p>
                            ë‹¤ìŒ ê¸€ì—ì„œëŠ” ì´ ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ <strong>Kotlin Coroutines & Flow</strong>ë¥¼ 
                            í™œìš©í•œ ë¹„ë™ê¸° ì²˜ë¦¬ íŒ¨í„´ì— ëŒ€í•´ ë” ê¹Šì´ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤.
                        </p>
                        
                        <div class="post-tags" style="margin-top: var(--space-2xl);">
                            <span class="post-tag">#Jetpack Compose</span>
                            <span class="post-tag">#Clean Architecture</span>
                            <span class="post-tag">#Hilt</span>
                            <span class="post-tag">#Multi-module</span>
                            <span class="post-tag">#Kotlin</span>
                            <span class="post-tag">#Android</span>
                        </div>
                        
                        <div class="post-navigation">
                            <a href="/posts/android/kotlin-coroutines-flow-deep-dive/" class="post-nav-item">
                                <span class="post-nav-label">Next Article â†’</span>
                                <span class="post-nav-title">Kotlin Coroutines & Flow ì‹¬ì¸µ ë¶„ì„</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </article>
    </main>
    
    <footer class="site-footer">
        <div class="container">
            <div class="footer-content">
                <p class="footer-text">Â© 2024 Chansaem Lee. Built with â¤ï¸</p>
                <div class="footer-links">
                    <a href="/categories/" class="footer-link">Categories</a>
                    <a href="/archives/" class="footer-link">Archives</a>
                    <a href="https://github.com/inyion" class="footer-link" target="_blank">GitHub</a>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const navMenu = document.getElementById('navMenu');
        mobileMenuBtn.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });
    </script>
</body>
</html>

